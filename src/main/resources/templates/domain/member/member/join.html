<html layout:decorate="~{layout}">
<div layout:fragment="content">
    <script>
        function submitJoinForm(form) {
            form.username.value = form.username.value.trim();

            if (form.username.value.length == 0) {
                toastWarning('사용자 ID를 입력해주세요.');
                form.username.focus();
                return;
            }

            form.password.value = form.password.value.trim();

            if (form.password.value.length == 0) {
                toastWarning('비밀번호를 입력해주세요.');
                form.password.focus();
                return;
            }

            form.passwordConfirm.value = form.passwordConfirm.value.trim();

            if (form.passwordConfirm.value.length == 0) {
                toastWarning('비밀번호 확인을 입력해주세요.');
                form.passwordConfirm.focus();
                return;
            }

            if (form.password.value != form.passwordConfirm.value) {
                toastWarning('비밀번호가 일치하지 않습니다.');
                form.passwordConfirm.focus();
                return;
            }

            form.nickname.value = form.nickname.value.trim();

            if (form.nickname.value.length == 0) {
                toastWarning('별명을 입력해주세요.');
                form.nickname.focus();
                return;
            }
            form.submit();
        }
    </script>

    <div class="container mt-5">
        <div class="d-flex align-items-center justify-content-center">
            <div class="col-md-6">
                <h3 class="mb-4">
                    <i class="fa-solid fa-arrow-right-to-bracket"></i>
                    회원가입
                </h3>
                <form th:action method="POST" enctype="multipart/form-data" onsubmit="submitJoinForm(this); return false;" class="flex flex-col gap-6">
                    <div class="form-group">
                        <label for="username">아이디</label>
                        <input type="text" class="form-control" id="username" name="username" placeholder="아이디">
                    </div>
                    <div class="form-group">
                        <label for="password">비밀번호</label>
                        <input type="password" class="form-control" id="password" name="password" placeholder="비밀번호">
                        <span style="color: #f21707;">비밀번호는 영문 대,소문자와 숫자, 특수기호가 적어도 1개 이상씩 포함된 8자 ~ 20자의 비밀번호여야 합니다."</span>
                    </div>
                    <div class="form-group">
                        <label for="password">비밀번호 확인</label>
                        <input type="password" class="form-control" id="passwordConfirm" name="passwordConfirm" placeholder="비밀번호 확인">
                    </div>
                    <div class="form-group">
                        <label for="email">이메일</label>
                        <div id="mail_input" name="mail_input">
                            <input type="text" class="form-control" name="email" id="email" placeholder="Enter email">
                            <button class="btn btn-primary btn-block mt-3" type="button" id="sendBtn" name="sendBtn" onclick="onSendButtonClick()">인증번호보내기
                            </button>
                        </div>
                    </div>
                    <div>
                        <div id="mail_number" name="mail_number" style="display: none">
                            <input type="text" class="form-control" name="verificationCode" id="number" placeholder="인증번호 입력">
                            <button class="btn btn-primary btn-block" type="button" name="confirmBtn" id="confirmBtn" onclick="confirmNumber()">이메일 인증
                            </button>
                        </div>
                        <input type="text" id="Confirm" name="Confirm" style="display: none" value="">
                    </div>
                    <div class="form-group">
                        <label for="nickname">닉네임</label>
                        <input type="text" class="form-control" id="nickname" name="nickname" placeholder="닉네임">
                    </div>
                    <div class="form-group">
                        <label for="image">프로필 이미지</label>
                        <input type="file" name="profileImg" id="image" accept="image/jpeg, image/png, image/gif">
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fa-regular fa-user"></i>
                        <span>회원가입</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
</html>